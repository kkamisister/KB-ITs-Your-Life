<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>checked</title>
</head>

<body>
    <form>
        <div>
            좋아하는 음식은?
            <!-- 전체 선택/해제 쳌박 -->
            <label><input type="checkbox" id="select-all" name="select-all" value="select-all">
                전체 선택</label>
            <label><input type="checkbox" name="food" value="라면" />
                라면</label>
            <label><input type="checkbox" name="food" value="만두" />
                만두</label>
            <label><input type="checkbox" name="food" value="불고기" />
                불고기</label>
            <input id="btn" type="button" value="전송" />
        </div>
    </form>
    <script>
        // 전체 선택/해제 체크박스 선택, 변수에 할당
        let $selectAll = document.getElementById("select-all")

        // 전체 선택 쳌박에 onclick 함수 붙이기
        $selectAll.onclick = function () {
            // 1. 음식 체크박스 선택
            const $checkboxes = document.querySelectorAll('input[name="food"]')
            // 2. 선택된 음식 체크박스들 forEach로 순회하며 'checked'상태 반대로 할당
            // (== 선택 상태 시 해제, 해제 상태 시 선택)
            $checkboxes.forEach($checkbox => {
                $checkbox.checked = !$checkbox.checked
            });
        }

        // 전송 버튼 선택, 변수에 할당
        let $btn = document.getElementById("btn")

        // 전송 버튼에 onclick 함수 붙이기
        $btn.onclick = function () {
            // // 1. id가 btn인 요소 btn 변수에 할당
            // let btn = document.getElementById("btn")

            // 2. 체크된, name이 'food'인 요소 모두 선택
            const $checkedBoxes = document.querySelectorAll('input[name="food"]:checked');

            // 3. 체크 개수에 따라 분기
            // 3-1. 1개 이상 선택했을 때 : 선택한 음식 + 선택한 개수 출력
            if ($checkedBoxes.length) {
                // 1) 체크된 food 요소 담을 빈 배열 생성
                const selectedFoods = [];

                // 2) 배d열에 $checkedBoxes 인덱스로 순회하며 push
                for (let i = 0; i < $checkedBoxes.length; i++) {
                    selectedFoods.push($checkedBoxes[i].value);
                }

                // 3) 선택한 음식 출력
                console.log('내가 좋아하는 건 말이죠 : ' + selectedFoods);
                // 4) 선택한 음식 수 출력
                console.log(selectedFoods.length + '개나 드시려구요?')

            }
            else { // 3-2. 아무것도 선택하지 않았을 때 : 꼽주기
                console.log('왜 안 고르세요')
            }

        };
    </script>
</body>

</html>